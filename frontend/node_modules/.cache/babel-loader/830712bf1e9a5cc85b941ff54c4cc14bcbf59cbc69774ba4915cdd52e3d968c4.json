{"ast":null,"code":"var _jsxFileName = \"D:\\\\HK3-N2\\\\ANTOANHETHONGWEB\\\\BT5\\\\frontend\\\\src\\\\components\\\\BookForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\n// Import API function để lấy categories\nimport { getCategories } from '../services/api';\n\n// Component Form Sách - Tự lấy danh sách Categories\n// Xóa prop 'categories' khỏi danh sách props\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction BookForm({\n  book,\n  onSubmit,\n  onCancel,\n  loading,\n  error: submissionError\n}) {\n  _s();\n  // State cho dữ liệu form\n  const [formData, setFormData] = useState({\n    title: '',\n    author: '',\n    isbn: '',\n    publish_year: '',\n    publisher: '',\n    category_name: '',\n    description: '',\n    quantity: 0,\n    price: 0.00\n  });\n  // State cho lỗi validation của form\n  const [formValidationError, setFormValidationError] = useState('');\n\n  // --- State và Logic Fetch Categories bên trong BookForm ---\n  const [internalCategories, setInternalCategories] = useState([]);\n  const [categoryLoading, setCategoryLoading] = useState(true);\n  const [categoryError, setCategoryError] = useState('');\n\n  // Sử dụng useEffect để fetch categories khi component mount\n  useEffect(() => {\n    const fetchCategories = async () => {\n      console.log(\"BookForm: Fetching categories...\");\n      setCategoryLoading(true);\n      setCategoryError('');\n      try {\n        const response = await getCategories();\n        setInternalCategories(response.data || []); // Lưu categories vào state nội bộ\n        console.log(\"BookForm: Categories fetched successfully\", response.data);\n      } catch (err) {\n        console.error(\"BookForm: Failed to fetch categories\", err);\n        setCategoryError(\"Could not load categories list.\");\n        // Có thể thêm xử lý lỗi xác thực nếu API /categories yêu cầu\n      } finally {\n        setCategoryLoading(false);\n      }\n    };\n    fetchCategories();\n  }, []); // Mảng dependency rỗng -> chạy 1 lần khi mount\n\n  // --- Cập nhật form data khi 'book' thay đổi (dùng state internalCategories) ---\n  useEffect(() => {\n    setFormValidationError(''); // Xóa lỗi validation cũ\n    // Chỉ cập nhật category_name nếu categories đã load xong VÀ có dữ liệu book\n    if (!categoryLoading && internalCategories.length > 0 && book) {\n      var _book$quantity, _book$price;\n      const category = internalCategories.find(cat => cat.id === book.category_id);\n      setFormData({\n        // Set lại toàn bộ form data dựa trên book\n        title: book.title || '',\n        author: book.author || '',\n        isbn: book.isbn || '',\n        publish_year: book.publish_year || '',\n        publisher: book.publisher || '',\n        category_name: category ? category.name : '',\n        // <<< Dùng tên từ internalCategories\n        description: book.description || '',\n        quantity: (_book$quantity = book.quantity) !== null && _book$quantity !== void 0 ? _book$quantity : 0,\n        price: (_book$price = book.price) !== null && _book$price !== void 0 ? _book$price : 0.00\n      });\n    } else if (!book) {\n      // Reset form nếu là chế độ thêm mới\n      setFormData({\n        title: '',\n        author: '',\n        isbn: '',\n        publish_year: '',\n        publisher: '',\n        category_name: '',\n        description: '',\n        quantity: 0,\n        price: 0.00\n      });\n    }\n    // Nếu đang edit mà categories chưa load xong, category_name sẽ tạm trống\n  }, [book, internalCategories, categoryLoading]); // Phụ thuộc vào book, internalCategories và categoryLoading\n\n  // Hàm xử lý input change (không đổi)\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      type\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: type === 'number' ? value === '' ? '' : Number(value) : value\n    }));\n    if (formValidationError) setFormValidationError('');\n  };\n\n  // Hàm xử lý submit (dùng state internalCategories)\n  const handleSubmit = e => {\n    e.preventDefault();\n    setFormValidationError('');\n\n    // --- Validation (không đổi) ---\n    if (!formData.title || !formData.category_name || formData.quantity === '' || formData.price === '') {\n      /* ... setFormValidationError ... */return;\n    }\n    if (isNaN(formData.quantity) || formData.quantity < 0) {\n      /* ... setFormValidationError ... */return;\n    }\n    if (isNaN(formData.price) || formData.price < 0) {\n      /* ... setFormValidationError ... */return;\n    }\n\n    // --- Tìm Category ID (dùng internalCategories) ---\n    const categoryNameInput = formData.category_name.trim();\n    const foundCategory = internalCategories.find(cat => cat.name.toLowerCase() === categoryNameInput.toLowerCase());\n    if (!foundCategory) {\n      setFormValidationError(`Category \"${categoryNameInput}\" not found. Please select from suggestions or add it first.`);\n      return;\n    }\n    const categoryId = foundCategory.id;\n\n    // --- Chuẩn bị Payload (không đổi) ---\n    const payload = {\n      title: formData.title,\n      author: formData.author || null,\n      isbn: formData.isbn || null,\n      publish_year: formData.publish_year ? Number(formData.publish_year) : null,\n      publisher: formData.publisher || null,\n      category_id: categoryId,\n      // <<< ID đã tìm được\n      description: formData.description || null,\n      quantity: Number(formData.quantity),\n      price: Number(formData.price)\n    };\n    console.log('BookForm Submitting Payload:', payload);\n    onSubmit(payload); // Gọi hàm submit của cha\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    style: {/* ... styles ... */},\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: book ? 'Edit Book' : 'Add New Book'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }, this), formValidationError && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error-message\",\n      children: formValidationError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 37\n    }, this), submissionError && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error-message\",\n      children: submissionError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 33\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {/* ... grid styles ... */},\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Category Name:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"category_name\",\n          value: formData.category_name,\n          onChange: handleChange,\n          required: true\n          // Disable khi đang submit form HOẶC đang load categories\n          ,\n          disabled: loading || categoryLoading,\n          placeholder: \"Enter existing category name\",\n          list: \"category-suggestions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"datalist\", {\n          id: \"category-suggestions\",\n          children: internalCategories.map(cat => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: cat.name\n          }, cat.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 21\n        }, this), categoryLoading && /*#__PURE__*/_jsxDEV(\"small\", {\n          style: {\n            display: 'block',\n            marginTop: '3px',\n            color: 'orange'\n          },\n          children: \" Loading categories...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 41\n        }, this), !categoryLoading && categoryError && /*#__PURE__*/_jsxDEV(\"small\", {\n          style: {\n            display: 'block',\n            marginTop: '3px',\n            color: 'red'\n          },\n          children: [\" \", categoryError]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 59\n        }, this), !categoryLoading && !categoryError && internalCategories.length === 0 && /*#__PURE__*/_jsxDEV(\"small\", {\n          style: {\n            display: 'block',\n            marginTop: '3px',\n            color: 'red'\n          },\n          children: \" No categories loaded.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 95\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          style: {\n            display: 'block',\n            marginTop: '3px',\n            color: '#555'\n          },\n          children: \"(Type to search, must match existing)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 22\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '15px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: loading || categoryLoading || !!categoryError,\n        children: [\" \", loading ? 'Saving...' : book ? 'Update Book' : 'Add Book']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }, this), book && /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"secondary\",\n        onClick: onCancel,\n        disabled: loading,\n        style: {\n          marginLeft: '10px'\n        },\n        children: \"Cancel Edit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 26\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 9\n  }, this);\n}\n_s(BookForm, \"L2+GAay1Xz35xCeefmRDKqt4+0Q=\");\n_c = BookForm;\nexport default BookForm;\nvar _c;\n$RefreshReg$(_c, \"BookForm\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","getCategories","jsxDEV","_jsxDEV","BookForm","book","onSubmit","onCancel","loading","error","submissionError","_s","formData","setFormData","title","author","isbn","publish_year","publisher","category_name","description","quantity","price","formValidationError","setFormValidationError","internalCategories","setInternalCategories","categoryLoading","setCategoryLoading","categoryError","setCategoryError","fetchCategories","console","log","response","data","err","length","_book$quantity","_book$price","category","find","cat","id","category_id","name","handleChange","e","value","type","target","prev","Number","handleSubmit","preventDefault","isNaN","categoryNameInput","trim","foundCategory","toLowerCase","categoryId","payload","style","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onChange","required","disabled","placeholder","list","map","display","marginTop","color","onClick","marginLeft","_c","$RefreshReg$"],"sources":["D:/HK3-N2/ANTOANHETHONGWEB/BT5/frontend/src/components/BookForm.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\n// Import API function để lấy categories\r\nimport { getCategories } from '../services/api';\r\n\r\n// Component Form Sách - Tự lấy danh sách Categories\r\n// Xóa prop 'categories' khỏi danh sách props\r\nfunction BookForm({ book, onSubmit, onCancel, loading, error: submissionError }) {\r\n    // State cho dữ liệu form\r\n    const [formData, setFormData] = useState({\r\n        title: '', author: '', isbn: '', publish_year: '', publisher: '',\r\n        category_name: '', description: '', quantity: 0, price: 0.00,\r\n    });\r\n    // State cho lỗi validation của form\r\n    const [formValidationError, setFormValidationError] = useState('');\r\n\r\n    // --- State và Logic Fetch Categories bên trong BookForm ---\r\n    const [internalCategories, setInternalCategories] = useState([]);\r\n    const [categoryLoading, setCategoryLoading] = useState(true);\r\n    const [categoryError, setCategoryError] = useState('');\r\n\r\n    // Sử dụng useEffect để fetch categories khi component mount\r\n    useEffect(() => {\r\n        const fetchCategories = async () => {\r\n            console.log(\"BookForm: Fetching categories...\");\r\n            setCategoryLoading(true);\r\n            setCategoryError('');\r\n            try {\r\n                const response = await getCategories();\r\n                setInternalCategories(response.data || []); // Lưu categories vào state nội bộ\r\n                console.log(\"BookForm: Categories fetched successfully\", response.data);\r\n            } catch (err) {\r\n                console.error(\"BookForm: Failed to fetch categories\", err);\r\n                setCategoryError(\"Could not load categories list.\");\r\n                // Có thể thêm xử lý lỗi xác thực nếu API /categories yêu cầu\r\n            } finally {\r\n                setCategoryLoading(false);\r\n            }\r\n        };\r\n        fetchCategories();\r\n    }, []); // Mảng dependency rỗng -> chạy 1 lần khi mount\r\n\r\n    // --- Cập nhật form data khi 'book' thay đổi (dùng state internalCategories) ---\r\n    useEffect(() => {\r\n        setFormValidationError(''); // Xóa lỗi validation cũ\r\n        // Chỉ cập nhật category_name nếu categories đã load xong VÀ có dữ liệu book\r\n        if (!categoryLoading && internalCategories.length > 0 && book) {\r\n            const category = internalCategories.find(cat => cat.id === book.category_id);\r\n            setFormData({ // Set lại toàn bộ form data dựa trên book\r\n                title: book.title || '',\r\n                author: book.author || '',\r\n                isbn: book.isbn || '',\r\n                publish_year: book.publish_year || '',\r\n                publisher: book.publisher || '',\r\n                category_name: category ? category.name : '', // <<< Dùng tên từ internalCategories\r\n                description: book.description || '',\r\n                quantity: book.quantity ?? 0,\r\n                price: book.price ?? 0.00,\r\n            });\r\n        } else if (!book) {\r\n            // Reset form nếu là chế độ thêm mới\r\n            setFormData({ title: '', author: '', isbn: '', publish_year: '', publisher: '', category_name: '', description: '', quantity: 0, price: 0.00 });\r\n        }\r\n        // Nếu đang edit mà categories chưa load xong, category_name sẽ tạm trống\r\n    }, [book, internalCategories, categoryLoading]); // Phụ thuộc vào book, internalCategories và categoryLoading\r\n\r\n    // Hàm xử lý input change (không đổi)\r\n    const handleChange = (e) => {\r\n        const { name, value, type } = e.target;\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            [name]: type === 'number' ? (value === '' ? '' : Number(value)) : value\r\n        }));\r\n        if (formValidationError) setFormValidationError('');\r\n    };\r\n\r\n    // Hàm xử lý submit (dùng state internalCategories)\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        setFormValidationError('');\r\n\r\n        // --- Validation (không đổi) ---\r\n        if (!formData.title || !formData.category_name || formData.quantity === '' || formData.price === '') { /* ... setFormValidationError ... */ return; }\r\n        if (isNaN(formData.quantity) || formData.quantity < 0) { /* ... setFormValidationError ... */ return; }\r\n        if (isNaN(formData.price) || formData.price < 0) { /* ... setFormValidationError ... */ return; }\r\n\r\n        // --- Tìm Category ID (dùng internalCategories) ---\r\n        const categoryNameInput = formData.category_name.trim();\r\n        const foundCategory = internalCategories.find(cat => cat.name.toLowerCase() === categoryNameInput.toLowerCase());\r\n\r\n        if (!foundCategory) {\r\n            setFormValidationError(`Category \"${categoryNameInput}\" not found. Please select from suggestions or add it first.`);\r\n            return;\r\n        }\r\n        const categoryId = foundCategory.id;\r\n\r\n        // --- Chuẩn bị Payload (không đổi) ---\r\n        const payload = {\r\n            title: formData.title, author: formData.author || null, isbn: formData.isbn || null,\r\n            publish_year: formData.publish_year ? Number(formData.publish_year) : null,\r\n            publisher: formData.publisher || null, category_id: categoryId, // <<< ID đã tìm được\r\n            description: formData.description || null, quantity: Number(formData.quantity),\r\n            price: Number(formData.price),\r\n        };\r\n\r\n        console.log('BookForm Submitting Payload:', payload);\r\n        onSubmit(payload); // Gọi hàm submit của cha\r\n    };\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit} style={{ /* ... styles ... */ }}>\r\n            <h3>{book ? 'Edit Book' : 'Add New Book'}</h3>\r\n            {formValidationError && <p className=\"error-message\">{formValidationError}</p>}\r\n            {submissionError && <p className=\"error-message\">{submissionError}</p>} {/* Lỗi từ API submit */}\r\n\r\n            <div style={{ /* ... grid styles ... */ }}>\r\n                {/* ... Các input khác (title, author, etc.) không đổi ... */}\r\n\r\n                {/* --- Input Category --- */}\r\n                <div>\r\n                    <label>Category Name:</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"category_name\"\r\n                        value={formData.category_name}\r\n                        onChange={handleChange}\r\n                        required\r\n                        // Disable khi đang submit form HOẶC đang load categories\r\n                        disabled={loading || categoryLoading}\r\n                        placeholder=\"Enter existing category name\"\r\n                        list=\"category-suggestions\"\r\n                    />\r\n                    {/* Datalist sử dụng internalCategories */}\r\n                    <datalist id=\"category-suggestions\">\r\n                        {internalCategories.map(cat => (\r\n                            <option key={cat.id} value={cat.name} />\r\n                        ))}\r\n                    </datalist>\r\n                    {/* Hiển thị trạng thái loading/error của categories */}\r\n                    {categoryLoading && <small style={{ display: 'block', marginTop: '3px', color: 'orange' }}> Loading categories...</small>}\r\n                    {!categoryLoading && categoryError && <small style={{ display: 'block', marginTop: '3px', color: 'red' }}> {categoryError}</small>}\r\n                    {!categoryLoading && !categoryError && internalCategories.length === 0 && <small style={{ display: 'block', marginTop: '3px', color: 'red' }}> No categories loaded.</small>}\r\n                     <small style={{display: 'block', marginTop: '3px', color: '#555'}}>\r\n                        (Type to search, must match existing)\r\n                     </small>\r\n                </div>\r\n                 {/* ... Các input còn lại (quantity, price, etc.) không đổi ... */}\r\n            </div>\r\n            <div style={{ marginTop: '15px' }}>\r\n                <button type=\"submit\" disabled={loading || categoryLoading || !!categoryError}> {/* Disable nút submit nếu đang load/lỗi categories */}\r\n                    {loading ? 'Saving...' : (book ? 'Update Book' : 'Add Book')}\r\n                </button>\r\n                {book && <button type=\"button\" className=\"secondary\" onClick={onCancel} disabled={loading} style={{ marginLeft: '10px' }}>Cancel Edit</button>}\r\n            </div>\r\n        </form>\r\n    );\r\n}\r\n\r\nexport default BookForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}