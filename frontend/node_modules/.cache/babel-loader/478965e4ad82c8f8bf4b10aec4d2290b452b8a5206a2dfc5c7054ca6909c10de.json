{"ast":null,"code":"var _jsxFileName = \"D:\\\\HK3-N2\\\\ANTOANHETHONGWEB\\\\BT5\\\\frontend\\\\src\\\\pages\\\\AdminUserPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { getUsers, getRoles, createUser, updateUserRole } from '../services/api';\nimport { useAuth } from '../contexts/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AdminUserPage() {\n  _s();\n  const [users, setUsers] = useState([]);\n  const [roles, setRoles] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const {\n    logout\n  } = useAuth();\n\n  // State cho form thêm user mới\n  const [newUser, setNewUser] = useState({\n    username: '',\n    password: '',\n    role_id: ''\n  });\n  const [formError, setFormError] = useState('');\n  const [formLoading, setFormLoading] = useState(false);\n\n  // State để quản lý việc thay đổi role cho từng user\n  const [editingRoles, setEditingRoles] = useState({}); // { userId: selectedRoleId }\n  const [roleChangeLoading, setRoleChangeLoading] = useState(null); // userId đang được thay đổi role\n\n  // --- Hàm Fetch dữ liệu ---\n  const fetchData = useCallback(async () => {\n    setLoading(true);\n    setError('');\n    try {\n      // Chạy song song 2 request\n      const [usersResponse, rolesResponse] = await Promise.all([getUsers(), getRoles()]);\n      setUsers(usersResponse.data);\n      setRoles(rolesResponse.data);\n      // Khởi tạo editingRoles với role hiện tại của mỗi user\n      const initialEditingRoles = {};\n      usersResponse.data.forEach(user => {\n        initialEditingRoles[user.id] = user.role_id;\n      });\n      setEditingRoles(initialEditingRoles);\n    } catch (err) {\n      console.error(\"Failed to fetch admin data:\", err);\n      if (err.response && (err.response.status === 401 || err.response.status === 403)) {\n        setError('Access denied or session expired. Please log in as Admin.');\n        setTimeout(logout, 3000);\n      } else {\n        setError('Failed to load user and role data.');\n      }\n    } finally {\n      setLoading(false);\n    }\n  }, [logout]); // Thêm logout vào dependency\n\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]); // Gọi fetchData khi component mount\n\n  // --- Xử lý Form Thêm User ---\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setNewUser(prevState => ({\n      ...prevState,\n      [name]: value\n    }));\n    // Xóa lỗi form khi người dùng bắt đầu nhập lại\n    if (formError) {\n      setFormError('');\n    }\n  };\n\n  // --- Cập nhật hàm Submit với Validation ---\n  const handleAddUserSubmit = async e => {\n    e.preventDefault();\n    setFormError(''); // Xóa lỗi cũ trước khi validate\n\n    // --- Chính sách Validation ---\n\n    // 1. Kiểm tra các trường bắt buộc\n    if (!newUser.username || !newUser.password || !newUser.role_id) {\n      setFormError('Please fill in all required fields (Username, Password, Role).');\n      return; // Dừng lại nếu thiếu trường\n    }\n\n    // 2. Chính sách Username: Không chứa dấu cách\n    if (/\\s/.test(newUser.username)) {\n      // Kiểm tra sự tồn tại của khoảng trắng\n      setFormError('Username policy violation: Cannot contain spaces.');\n      return;\n    }\n\n    // 3. Chính sách Username: Độ dài tối thiểu (ví dụ: 3)\n    if (newUser.username.trim().length < 3) {\n      // trim() để loại bỏ khoảng trắng đầu/cuối nếu có\n      setFormError('Username policy violation: Must be at least 3 characters long.');\n      return;\n    }\n\n    // 4. Chính sách Password: Độ dài tối thiểu (ví dụ: 6)\n    if (newUser.password.length < 6) {\n      setFormError('Password policy violation: Must be at least 6 characters long.');\n      return;\n    }\n    setFormLoading(true);\n    try {\n      await createUser(newUser);\n      alert('User created successfully!');\n      setNewUser({\n        username: '',\n        password: '',\n        role_id: ''\n      }); // Reset form\n      fetchData(); // Tải lại danh sách user\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error(\"Failed to create user:\", err);\n      setFormError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Failed to create user.');\n    } finally {\n      setFormLoading(false);\n    }\n  };\n\n  // --- Xử lý Thay đổi Role ---\n  const handleRoleSelectionChange = (userId, selectedRoleId) => {\n    setEditingRoles(prev => ({\n      ...prev,\n      [userId]: selectedRoleId // Cập nhật role được chọn cho user cụ thể\n    }));\n  };\n  const handleUpdateRole = async userId => {\n    const newRoleId = editingRoles[userId];\n    if (!newRoleId) {\n      alert(\"No new role selected.\"); // Trường hợp này không nên xảy ra nếu UI đúng\n      return;\n    }\n\n    // Tìm role_id hiện tại để tránh gọi API nếu không đổi\n    const currentUser = users.find(u => u.id === userId);\n    if (currentUser && currentUser.role_id === parseInt(newRoleId, 10)) {\n      alert(\"Role is already set to this value.\");\n      return;\n    }\n    setRoleChangeLoading(userId); // Bắt đầu loading cho user này\n    setError(''); // Xóa lỗi chung cũ\n    try {\n      await updateUserRole(userId, newRoleId);\n      alert(`Role for user ID ${userId} updated successfully!`);\n      // Cập nhật lại role_name trong state `users` để UI hiển thị đúng ngay lập tức\n      setUsers(prevUsers => prevUsers.map(user => {\n        if (user.id === userId) {\n          const newRole = roles.find(r => r.id === parseInt(newRoleId, 10));\n          return {\n            ...user,\n            role_id: parseInt(newRoleId, 10),\n            role_name: newRole ? newRole.name : 'Unknown'\n          };\n        }\n        return user;\n      }));\n      // Không cần gọi lại fetchData() nếu chỉ cập nhật state\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      console.error(\"Failed to update role:\", err);\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || `Failed to update role for user ${userId}.`);\n    } finally {\n      setRoleChangeLoading(null); // Kết thúc loading\n    }\n  };\n\n  // --- UI Rendering ---\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"loading\",\n    children: \"Loading Admin Data...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 159,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Admin - User Management\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '30px',\n        paddingBottom: '20px',\n        borderBottom: '1px solid #eee'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Add New User\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleAddUserSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Username:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"username\",\n            value: newUser.username,\n            onChange: handleInputChange,\n            required: true,\n            disabled: formLoading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Password:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            name: \"password\",\n            value: newUser.password,\n            onChange: handleInputChange,\n            required: true,\n            disabled: formLoading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Role:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"role_id\",\n            value: newUser.role_id,\n            onChange: handleInputChange,\n            required: true,\n            disabled: formLoading || roles.length === 0,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"-- Select Role --\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 15\n            }, this), roles.map(role => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: role.id,\n              children: role.name\n            }, role.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 17\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 11\n        }, this), formError && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"error-message\",\n          style: {\n            marginTop: '10px'\n          },\n          children: formError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: formLoading,\n          children: formLoading ? 'Adding...' : 'Add User'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Existing Users\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }, this), users.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No users found.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"ID\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Current Role\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Change Role To\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Action\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: users.map(user => /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: user.id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: user.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: user.role_name || 'Unknown'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"select\", {\n              value: editingRoles[user.id] || '' // Lấy role đang được chọn cho user này\n              ,\n              onChange: e => handleRoleSelectionChange(user.id, e.target.value),\n              disabled: roleChangeLoading === user.id || roles.length === 0,\n              children: roles.map(role => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: role.id,\n                children: role.name\n              }, role.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 25\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleUpdateRole(user.id),\n              disabled: roleChangeLoading === user.id || !editingRoles[user.id] || parseInt(editingRoles[user.id], 10) === user.role_id // Disable nếu đang load hoặc role ko đổi\n              ,\n              children: roleChangeLoading === user.id ? 'Saving...' : 'Save Role'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 18\n          }, this)]\n        }, user.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      jsx: true,\n      children: `\n         table { width: 100%; border-collapse: collapse; margin-top: 15px; }\n         th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }\n         th { background-color: #f2f2f2; }\n         tr:nth-child(even) { background-color: #f9f9f9; }\n         td select { padding: 5px; min-width: 120px; }\n         td button { padding: 5px 10px; font-size: 0.9em;}\n       `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 8\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 162,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminUserPage, \"8GeDswoPDTSjX7yGeLURw2s3aj0=\", false, function () {\n  return [useAuth];\n});\n_c = AdminUserPage;\nexport default AdminUserPage;\nvar _c;\n$RefreshReg$(_c, \"AdminUserPage\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","getUsers","getRoles","createUser","updateUserRole","useAuth","jsxDEV","_jsxDEV","AdminUserPage","_s","users","setUsers","roles","setRoles","loading","setLoading","error","setError","logout","newUser","setNewUser","username","password","role_id","formError","setFormError","formLoading","setFormLoading","editingRoles","setEditingRoles","roleChangeLoading","setRoleChangeLoading","fetchData","usersResponse","rolesResponse","Promise","all","data","initialEditingRoles","forEach","user","id","err","console","response","status","setTimeout","handleInputChange","e","name","value","target","prevState","handleAddUserSubmit","preventDefault","test","trim","length","alert","_err$response","_err$response$data","message","handleRoleSelectionChange","userId","selectedRoleId","prev","handleUpdateRole","newRoleId","currentUser","find","u","parseInt","prevUsers","map","newRole","r","role_name","_err$response2","_err$response2$data","className","children","fileName","_jsxFileName","lineNumber","columnNumber","style","marginBottom","paddingBottom","borderBottom","onSubmit","type","onChange","required","disabled","role","marginTop","onClick","jsx","_c","$RefreshReg$"],"sources":["D:/HK3-N2/ANTOANHETHONGWEB/BT5/frontend/src/pages/AdminUserPage.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { getUsers, getRoles, createUser, updateUserRole } from '../services/api';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\nfunction AdminUserPage() {\r\n  const [users, setUsers] = useState([]);\r\n  const [roles, setRoles] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const { logout } = useAuth();\r\n\r\n  // State cho form thêm user mới\r\n  const [newUser, setNewUser] = useState({ username: '', password: '', role_id: '' });\r\n  const [formError, setFormError] = useState('');\r\n  const [formLoading, setFormLoading] = useState(false);\r\n\r\n  // State để quản lý việc thay đổi role cho từng user\r\n  const [editingRoles, setEditingRoles] = useState({}); // { userId: selectedRoleId }\r\n  const [roleChangeLoading, setRoleChangeLoading] = useState(null); // userId đang được thay đổi role\r\n\r\n  // --- Hàm Fetch dữ liệu ---\r\n  const fetchData = useCallback(async () => {\r\n    setLoading(true);\r\n    setError('');\r\n    try {\r\n      // Chạy song song 2 request\r\n      const [usersResponse, rolesResponse] = await Promise.all([\r\n        getUsers(),\r\n        getRoles()\r\n      ]);\r\n      setUsers(usersResponse.data);\r\n      setRoles(rolesResponse.data);\r\n       // Khởi tạo editingRoles với role hiện tại của mỗi user\r\n       const initialEditingRoles = {};\r\n       usersResponse.data.forEach(user => {\r\n           initialEditingRoles[user.id] = user.role_id;\r\n       });\r\n       setEditingRoles(initialEditingRoles);\r\n\r\n    } catch (err) {\r\n      console.error(\"Failed to fetch admin data:\", err);\r\n      if (err.response && (err.response.status === 401 || err.response.status === 403)) {\r\n        setError('Access denied or session expired. Please log in as Admin.');\r\n        setTimeout(logout, 3000);\r\n      } else {\r\n        setError('Failed to load user and role data.');\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [logout]); // Thêm logout vào dependency\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, [fetchData]); // Gọi fetchData khi component mount\r\n\r\n  // --- Xử lý Form Thêm User ---\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setNewUser(prevState => ({ ...prevState, [name]: value }));\r\n    // Xóa lỗi form khi người dùng bắt đầu nhập lại\r\n    if (formError) {\r\n        setFormError('');\r\n    }\r\n  };\r\n\r\n  // --- Cập nhật hàm Submit với Validation ---\r\n  const handleAddUserSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setFormError(''); // Xóa lỗi cũ trước khi validate\r\n\r\n    // --- Chính sách Validation ---\r\n\r\n    // 1. Kiểm tra các trường bắt buộc\r\n    if (!newUser.username || !newUser.password || !newUser.role_id) {\r\n      setFormError('Please fill in all required fields (Username, Password, Role).');\r\n      return; // Dừng lại nếu thiếu trường\r\n    }\r\n\r\n    // 2. Chính sách Username: Không chứa dấu cách\r\n    if (/\\s/.test(newUser.username)) { // Kiểm tra sự tồn tại của khoảng trắng\r\n      setFormError('Username policy violation: Cannot contain spaces.');\r\n      return;\r\n    }\r\n\r\n    // 3. Chính sách Username: Độ dài tối thiểu (ví dụ: 3)\r\n    if (newUser.username.trim().length < 3) { // trim() để loại bỏ khoảng trắng đầu/cuối nếu có\r\n      setFormError('Username policy violation: Must be at least 3 characters long.');\r\n      return;\r\n    }\r\n\r\n    // 4. Chính sách Password: Độ dài tối thiểu (ví dụ: 6)\r\n    if (newUser.password.length < 6) {\r\n      setFormError('Password policy violation: Must be at least 6 characters long.');\r\n      return;\r\n    }\r\n    setFormLoading(true);\r\n    try {\r\n      await createUser(newUser);\r\n      alert('User created successfully!');\r\n      setNewUser({ username: '', password: '', role_id: '' }); // Reset form\r\n      fetchData(); // Tải lại danh sách user\r\n    } catch (err) {\r\n      console.error(\"Failed to create user:\", err);\r\n      setFormError(err.response?.data?.message || 'Failed to create user.');\r\n    } finally {\r\n      setFormLoading(false);\r\n    }\r\n  };\r\n\r\n   // --- Xử lý Thay đổi Role ---\r\n   const handleRoleSelectionChange = (userId, selectedRoleId) => {\r\n       setEditingRoles(prev => ({\r\n           ...prev,\r\n           [userId]: selectedRoleId // Cập nhật role được chọn cho user cụ thể\r\n       }));\r\n   };\r\n\r\n   const handleUpdateRole = async (userId) => {\r\n       const newRoleId = editingRoles[userId];\r\n       if (!newRoleId) {\r\n           alert(\"No new role selected.\"); // Trường hợp này không nên xảy ra nếu UI đúng\r\n           return;\r\n       }\r\n\r\n       // Tìm role_id hiện tại để tránh gọi API nếu không đổi\r\n        const currentUser = users.find(u => u.id === userId);\r\n        if (currentUser && currentUser.role_id === parseInt(newRoleId, 10)) {\r\n             alert(\"Role is already set to this value.\");\r\n             return;\r\n        }\r\n\r\n\r\n       setRoleChangeLoading(userId); // Bắt đầu loading cho user này\r\n       setError(''); // Xóa lỗi chung cũ\r\n       try {\r\n           await updateUserRole(userId, newRoleId);\r\n           alert(`Role for user ID ${userId} updated successfully!`);\r\n           // Cập nhật lại role_name trong state `users` để UI hiển thị đúng ngay lập tức\r\n            setUsers(prevUsers => prevUsers.map(user => {\r\n                if (user.id === userId) {\r\n                    const newRole = roles.find(r => r.id === parseInt(newRoleId, 10));\r\n                    return { ...user, role_id: parseInt(newRoleId, 10), role_name: newRole ? newRole.name : 'Unknown' };\r\n                }\r\n                return user;\r\n            }));\r\n            // Không cần gọi lại fetchData() nếu chỉ cập nhật state\r\n\r\n       } catch (err) {\r\n           console.error(\"Failed to update role:\", err);\r\n           setError(err.response?.data?.message || `Failed to update role for user ${userId}.`);\r\n       } finally {\r\n            setRoleChangeLoading(null); // Kết thúc loading\r\n       }\r\n   };\r\n\r\n\r\n  // --- UI Rendering ---\r\n  if (loading) return <div className=\"loading\">Loading Admin Data...</div>;\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h2>Admin - User Management</h2>\r\n      {error && <p className=\"error-message\">{error}</p>}\r\n\r\n      {/* --- Form Thêm User --- */}\r\n      <div style={{ marginBottom: '30px', paddingBottom: '20px', borderBottom: '1px solid #eee' }}>\r\n        <h3>Add New User</h3>\r\n        <form onSubmit={handleAddUserSubmit}>\r\n          <div>\r\n            <label>Username:</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"username\"\r\n              value={newUser.username}\r\n              onChange={handleInputChange}\r\n              required\r\n              disabled={formLoading}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label>Password:</label>\r\n            <input\r\n              type=\"password\"\r\n              name=\"password\"\r\n              value={newUser.password}\r\n              onChange={handleInputChange}\r\n              required\r\n              disabled={formLoading}\r\n            />\r\n          </div>\r\n          <div>\r\n            <label>Role:</label>\r\n            <select\r\n              name=\"role_id\"\r\n              value={newUser.role_id}\r\n              onChange={handleInputChange}\r\n              required\r\n              disabled={formLoading || roles.length === 0}\r\n            >\r\n              <option value=\"\">-- Select Role --</option>\r\n              {roles.map(role => (\r\n                <option key={role.id} value={role.id}>{role.name}</option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n          {formError && <p className=\"error-message\" style={{marginTop: '10px'}}>{formError}</p>}\r\n          <button type=\"submit\" disabled={formLoading}>\r\n            {formLoading ? 'Adding...' : 'Add User'}\r\n          </button>\r\n        </form>\r\n      </div>\r\n\r\n      {/* --- Danh sách User --- */}\r\n      <h3>Existing Users</h3>\r\n      {users.length === 0 ? (\r\n        <p>No users found.</p>\r\n      ) : (\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>ID</th>\r\n              <th>Username</th>\r\n              <th>Current Role</th>\r\n              <th>Change Role To</th>\r\n              <th>Action</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {users.map(user => (\r\n              <tr key={user.id}>\r\n                <td>{user.id}</td>\r\n                <td>{user.username}</td>\r\n                <td>{user.role_name || 'Unknown'}</td>\r\n                <td>\r\n                  <select\r\n                     value={editingRoles[user.id] || ''} // Lấy role đang được chọn cho user này\r\n                     onChange={(e) => handleRoleSelectionChange(user.id, e.target.value)}\r\n                     disabled={roleChangeLoading === user.id || roles.length === 0}\r\n                   >\r\n                     {roles.map(role => (\r\n                        <option key={role.id} value={role.id}>{role.name}</option>\r\n                     ))}\r\n                   </select>\r\n                </td>\r\n                 <td>\r\n                    <button\r\n                        onClick={() => handleUpdateRole(user.id)}\r\n                        disabled={roleChangeLoading === user.id || !editingRoles[user.id] || parseInt(editingRoles[user.id], 10) === user.role_id} // Disable nếu đang load hoặc role ko đổi\r\n                    >\r\n                       {roleChangeLoading === user.id ? 'Saving...' : 'Save Role'}\r\n                    </button>\r\n                    {/* TODO: Thêm nút Delete User nếu cần */}\r\n                 </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n       <style jsx>{`\r\n         table { width: 100%; border-collapse: collapse; margin-top: 15px; }\r\n         th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }\r\n         th { background-color: #f2f2f2; }\r\n         tr:nth-child(even) { background-color: #f9f9f9; }\r\n         td select { padding: 5px; min-width: 120px; }\r\n         td button { padding: 5px 10px; font-size: 0.9em;}\r\n       `}</style>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AdminUserPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}